<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Sketchviz</title>

        <!-- bootstrap -->
        <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

        <!-- JSmol -->
        <script type="text/javascript" src="jsmol/JSmol.min.nojq.js"></script>

        <script defer type="text/javascript" src="sketchviz.min.js"></script>
    </head>

    <body>
        <header style="padding: 1em 0; margin-bottom: 2em;">
            <h1 style="text-align: center">Sketchmap vizualization</h1>
        </header>
        <div class="container">
            <div class="row">
                <div class="col-xl-7">
                    <div id=skviz-map style="height: 100%"></div>
                </div>

                <div class="col-xl-5">
                    <div id=skviz-viewer style="height: 70%"></div>
                </div>
            </div>
        </div>
    </body>

    <script>
        function loadData(name) {
        	fetch(`${name}.json`)
                .then(response => response.json())
                .then(json => {
                    const map = new Sketchviz.Sketchmap('skviz-map', {
                        name: name,
                        data: json.sketchmap,
                    });
                    const view = new Sketchviz.Viewer('skviz-viewer', 'jsmol/j2s', json.structures);

                    map.onClick((i) => view.showStructure(i));
                })
                .catch(e => console.log(e));
        }

        document.addEventListener("DOMContentLoaded", () => {
        	loadData('Arginine-Dipeptide');
        	// loadData('Pyrole');
        	// loadData('Qm7b');
        });
    </script>
</html>
