<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Sketchviz</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <h1 style="text-align: center;">Sketchmap vizualization</h1>

        <div style="width:80%; margin:auto; display: flex;">
            <div id="sketchmap" style="width: 70%;"></div>
            <div id="viewer" style="width: 30%;"></div>
        </div>

    <script type="text/javascript" src="sketchviz.min.js"></script>
    <script type="text/javascript" src="JSmol-14.29.53.min.js"></script>
    <script>
	function loadData(name) {
		fetch(`${name}.json`)
            .then(response => response.json())
            .then(json => {
				const data = {
					x: json.sketchmap.CV1,
                    y: json.sketchmap.CV2,
                    color_by: {}
				}
				for (key in json.sketchmap) {
					if (key === 'CV1' || key === 'CV2') {
						continue;
					}
					data.color_by[key] = json.sketchmap[key]
				}

                const map = new Sketchviz.Sketchmap(name, data);
                map.setup(document.getElementById('sketchmap'));

                const view = new Sketchviz.Viewer('viewer', 'j2s', json.structures);

                map.onClick((i) => view.showStructure(i));
            })
            .catch(e => console.log(e));
	}
    document.addEventListener("DOMContentLoaded", () => {
		loadData('Arginine-Dipeptide');
		// loadData('Pyrole');
		// loadData('Qm7b');
    });
    </script>
</html>
